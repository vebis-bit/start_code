from run_recipe_search import run_recipe_search
    
class Lager():
    def __init__(self):
        self.kjøleskap = {
            "eple":150,
        }
    def hente_inn_oppskrifter(self,liste):
        oppskrifter = []
        for i in range (len(liste)):
            oppskrift = {}
            oppskrift['navn'] = liste[i][0]
            for j in liste[i][5]:
                oppskrift[j['food']] = j['weight']
            oppskrifter.append(oppskrift)
        return oppskrifter

    def inn_av_kjoleskap(self, liste, matrett):
        for i in liste:
            if i['navn'] == matrett:
                for key, value in i.items():
                    self.kjøleskap[key] -= value
                    if key not in self.kjøleskap:
                        self.kjøleskap['navn'] =- value
        return self.kjøleskap
    
    def ut_av_kjøleskap(self, liste):
        oppskriften = self.hente_inn_oppskrifter(liste)
        handlekurv = {}
        for oppskrift in oppskriften:
            for key, value in oppskrift.items():
                if key == 'navn':
                    continue
                else:
                    if key in self.kjøleskap:
                        handlekurv[key] = self.kjøleskap[key - value]
                    else: 
                        handlekurv[key] = -value                   
                    if handlekurv[key] < 0:
                        print(f"Du mangler {abs(handlekurv[key])} gram av {key}")
                    #else:
                        print(f"Du har alle ingrediensene for å lage {liste[0]}")
        return handlekurv
    
Herman = Lager()
print(Herman.hente_inn_oppskrifter(run_recipe_search('dinner', 'no', 'apple'))[0])
     

print(Herman.ut_av_kjøleskap(run_recipe_search('dinner','no', 'apple')))





